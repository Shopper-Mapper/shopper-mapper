(this["webpackJsonpshopper-mapper"]=this["webpackJsonpshopper-mapper"]||[]).push([[0],{25:function(e,t,a){},27:function(e,t,a){e.exports=a(54)},32:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),o=a.n(c),s=(a(32),a(14)),i=a(7),l=a.n(i),u=a(8),p=a(3),m=a(4),h=a(6),d=a(5),v=a(9),f=a.n(v),y=(a(25),a(11)),g=a(12),b=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleChangeLocation=function(t){console.log(t.target.value),e.setState({userInputlocation:t.target.value})},e.handleChangeQuery=function(t){e.setState({userInputQuery:t.target.value})},e.state={userInputlocation:"",userInputQuery:""},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("header",{className:"header"},r.a.createElement("form",{className:"row",action:""},r.a.createElement("div",{className:"header-search col-auto"},r.a.createElement("div",null,r.a.createElement("label",{className:"sr-only",htmlFor:"searchLocation"},"Enter location:"),r.a.createElement("input",{className:"input input-location",onChange:this.handleChangeLocation,type:"text",name:"searchLocation",id:"searchLocation",placeholder:"Your location"})),r.a.createElement("div",null,r.a.createElement("label",{className:"sr-only",htmlFor:"searchQuery"},"Enter query:"),r.a.createElement("input",{className:"input input-query",onChange:this.handleChangeQuery,type:"text",name:"searchQuery",id:"searchQuery",placeholder:"Your query"}))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"button",onClick:function(t){return e.props.handleClick(t,e.state.userInputlocation,e.state.userInputQuery)},type:"submit"},r.a.createElement(y.a,{icon:g.a,size:"2x"})))))}}]),a}(n.Component),E=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).searchResult=function(t){var a=t.currentTarget.value;e.props.onClick(a)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.query.length>0?this.props.query.map((function(t){return r.a.createElement("button",{key:t.id,id:t.id,value:t.displayString,onClick:e.searchResult},t.displayString)})):r.a.createElement("p",null,"No results!"))}}]),a}(n.Component),k=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={mapImageData:""},e}return Object(m.a)(a,[{key:"mapImage",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f()({method:"GET",url:"https://www.mapquestapi.com/staticmap/v5/map",responseType:"blob",params:{key:"tZVntk8rKYnj1VeUAi4cTD6mGHgEoP15",scalebar:"true|bottom",locations:"43.6532,-79.3832||42.3149,-83.0364",shape:"radius:10km|Toronto, ON",size:"600,600"}});case 3:t=e.sent,this.setState({mapImageData:URL.createObjectURL(t.data)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Axios ruquest is failed ".concat(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:this.props.mapImageData,alt:""}))}}]),a}(n.Component),j=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.directionsArray.map((function(e){return r.a.createElement("ol",{key:e.index},r.a.createElement("li",null,e.narrative))})))}}]),a}(n.Component),w="tZVntk8rKYnj1VeUAi4cTD6mGHgEoP15",O=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleClick=function(){var t=Object(u.a)(l.a.mark((function t(a,n,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,e.getQueries(n,r);case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.destinationClick=function(t){e.setState({destination:t},(function(){console.log(e.state.location),console.log(e.state.destination);try{f()({url:"http://www.mapquestapi.com/directions/v2/route",method:"GET",responseType:"json",params:{key:w,from:e.state.location,to:e.state.destination}}).then((function(t){t=t.data.route.legs[0].maneuvers,e.setState({directions:t}),console.log(e.state.directions)}))}catch(t){console.log(t)}}))},e.state={queryList:[],searchResults:!1,destination:"",directions:[],mapImageData:""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getQueries",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,c,o,i,u,p,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f()({url:"http://www.mapquestapi.com/geocoding/v1/address",method:"GET",responseType:"json",params:{key:w,location:t}});case 3:return n=e.sent,r=Object(s.a)(n.data.results,1),c=Object(s.a)(r[0].locations,1),o=c[0].latLng,i=o.lat,u=o.lng,e.next=11,f()({url:"http://www.mapquestapi.com//search/v4/place",method:"GET",responseType:"json",params:{location:"".concat(u,", ").concat(i),key:w,sort:"relevance",q:a}});case 11:p=e.sent,m=p.data.results,this.setState({queryList:m,searchResults:!0,location:t}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Axios request is failed ".concat(e.t0));case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Shopper - Mapper"),r.a.createElement(b,{handleClick:this.handleClick}),this.state.searchResults?r.a.createElement(E,{query:this.state.queryList,onClick:this.destinationClick}):r.a.createElement("div",null),r.a.createElement(j,{directionsArray:this.state.directions}),r.a.createElement(k,{mapImageData:this.state.mapImageData}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.62cd9b6d.chunk.js.map