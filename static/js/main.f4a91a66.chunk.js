(this["webpackJsonpshopper-mapper"]=this["webpackJsonpshopper-mapper"]||[]).push([[0],{26:function(e,t,a){e.exports=a(55)},31:function(e,t,a){},49:function(e,t,a){},54:function(e,t,a){e.exports=a.p+"static/media/map.e9e08731.jpg"},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),c=a.n(s),o=(a(31),a(12)),i=a(7),l=a.n(i),u=a(9),m=a(3),p=a(4),h=a(6),d=a(5),y=a(8),v=a.n(y),f=(a(49),a(24)),g=a(25),E=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handleChangeLocation=function(t){console.log(t.target.value),e.setState({userInputlocation:t.target.value})},e.handleChangeQuery=function(t){e.setState({userInputQuery:t.target.value})},e.state={userInputlocation:"",userInputQuery:""},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("header",{className:"header"},r.a.createElement("form",{className:"row",action:""},r.a.createElement("div",{className:"header-search col-auto"},r.a.createElement("div",null,r.a.createElement("label",{className:"sr-only",htmlFor:"searchLocation"},"Enter location:"),r.a.createElement("input",{className:"input input-location",onChange:this.handleChangeLocation,type:"text",name:"searchLocation",id:"searchLocation",placeholder:"Your location"})),r.a.createElement("div",null,r.a.createElement("label",{className:"sr-only",htmlFor:"searchQuery"},"Enter query:"),r.a.createElement("input",{className:"input input-query",onChange:this.handleChangeQuery,type:"text",name:"searchQuery",id:"searchQuery",placeholder:"Your query"}))),r.a.createElement("div",{className:"col-auto header-search-btn"},r.a.createElement("button",{className:"button",onClick:function(t){return e.props.handleClick(t,e.state.userInputlocation,e.state.userInputQuery)},type:"submit"},r.a.createElement(f.a,{className:"search-icon",icon:g.a})))))}}]),a}(n.Component),b=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).searchResult=function(t){var a=t.currentTarget.value;e.props.onClick(a)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.query.length>0?this.props.query.map((function(t,a){return r.a.createElement("button",{className:e.props.median.includes(a)?"query-btn highlighted":"query-btn",key:t.id,id:t.id,value:t.displayString,onClick:e.searchResult},t.displayString)})):r.a.createElement("p",null,"No results!"))}}]),a}(n.Component),k=(n.Component,function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.directionsArray.map((function(e){return r.a.createElement("ol",{key:e.index},r.a.createElement("li",null,e.narrative))})))}}]),a}(n.Component)),w=function(e){var t=e.children;return r.a.createElement("main",null,t)},j="tZVntk8rKYnj1VeUAi4cTD6mGHgEoP15",q=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).searchResultsArray=function(){return e.state.queryList.map((function(t,a){return t.displayString+(e.state.middleLocation.includes(a)?"|marker-red":"")})).join("||")},e.findMiddle=function(){var t=Math.floor((e.state.queryList.length-1)/2),a=[];a=e.state.queryList.length%2?[t]:[t,t+1],e.setState({middleLocation:a})},e.handleClick=function(){var t=Object(u.a)(l.a.mark((function t(a,n,r){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,e.getQueries(n,r);case 3:return t.prev=3,e.findMiddle(),t.next=7,v()({method:"GET",url:"https://www.mapquestapi.com/staticmap/v5/map",responseType:"blob",params:{key:"tZVntk8rKYnj1VeUAi4cTD6mGHgEoP15",scalebar:"true|bottom",locations:e.state.location+e.searchResultsArray(),shape:"radius:10km|".concat(e.state.location),size:"600,600"}});case 7:s=t.sent,e.setState({mapImageData:URL.createObjectURL(s.data)}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log("Axios request is failed ".concat(t.t0));case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,a,n){return t.apply(this,arguments)}}(),e.destinationClick=function(t){e.setState({destination:t},(function(){try{v()({url:"https://www.mapquestapi.com/directions/v2/route",method:"GET",responseType:"json",params:{key:j,from:e.state.location,to:e.state.destination}}).then((function(t){t=t.data.route.legs[0].maneuvers,e.setState({directions:t})})),v()({method:"GET",url:"https://www.mapquestapi.com/staticmap/v5/map",responseType:"blob",params:{key:"tZVntk8rKYnj1VeUAi4cTD6mGHgEoP15",scalebar:"true|bottom",start:e.state.location,end:e.state.destination,size:"600,600"}}).then((function(t){e.setState({mapImageData:URL.createObjectURL(t.data)})}))}catch(t){console.log("Axios request is failed ".concat(t))}}))},e.state={queryList:[],searchResults:!1,destination:"",directions:[],mapImageData:"",location:"",middleLocation:[],range:1e4},e}return Object(p.a)(n,[{key:"getQueries",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,s,c,i,u,m,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()({url:"https://www.mapquestapi.com/geocoding/v1/address",method:"GET",responseType:"json",params:{key:j,location:t}});case 3:return n=e.sent,r=Object(o.a)(n.data.results,1),s=Object(o.a)(r[0].locations,1),c=s[0].latLng,i=c.lat,u=c.lng,e.next=11,v()({url:"https://www.mapquestapi.com//search/v4/place",method:"GET",responseType:"json",params:{circle:"".concat(u,", ").concat(i,", ").concat(this.state.range),pageSize:20,key:j,sort:"relevance",q:a}});case 11:m=e.sent,p=m.data.results,this.setState({queryList:p,searchResults:!0,location:t}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Axios request is failed ".concat(e.t0));case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-80"},r.a.createElement(E,{handleClick:this.handleClick}),r.a.createElement(w,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"search-list col-50"},this.state.searchResults?r.a.createElement(b,{query:this.state.queryList,median:this.state.middleLocation,onClick:this.destinationClick}):r.a.createElement("p",null,"Loading...")),r.a.createElement("div",{className:"col-50"},this.state.mapImageData?r.a.createElement("img",{className:"query-image",src:this.state.mapImageData,alt:"map"}):r.a.createElement("img",{className:"query-image",src:a(54),alt:"anothermap"}))),r.a.createElement(k,{directionsArray:this.state.directions})))))}}]),n}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.f4a91a66.chunk.js.map